<div class="d-flex align-items-center p-3">
  <app-search-bar class="width-100" (keyword)="onSearch($event)"></app-search-bar>
</div>



<div class="table mx-2">
  <mat-table matSort [dataSource]="sessionList()" (matSortChange)="onSortChange($event)">
  <!-- Pseudo Column -->
  <ng-container matColumnDef="pseudo">
    <mat-header-cell mat-sort-header *matHeaderCellDef [class.highlighted]="sortedField() === 'pseudo'"> Psuedo </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.pseudo }} </mat-cell>
  </ng-container>

  <!-- Device Column -->
  <ng-container matColumnDef="device">
    <mat-header-cell mat-sort-header *matHeaderCellDef [class.highlighted]="sortedField() === 'device'"> Appareil </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.device }} </mat-cell>
  </ng-container>

  <!-- Start time Column -->
  <ng-container matColumnDef="startTime">
    <mat-header-cell mat-sort-header *matHeaderCellDef [class.highlighted]="sortedField() === 'startTime'"> Heure de début </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.startTime | dateTimeFormat:'HH:mm'}} </mat-cell>
  </ng-container>

  <!-- End Time Column -->
  <ng-container matColumnDef="endTime">
    <mat-header-cell mat-sort-header *matHeaderCellDef [class.highlighted]="sortedField() === 'endTime'"> Heure de fin </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.endTime | dateTimeFormat: 'HH:mm' }} </mat-cell>
  </ng-container>

  <!-- Data used Column -->
  <ng-container matColumnDef="data">
    <mat-header-cell *matHeaderCellDef> Données consommés </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.dataUsed }} </mat-cell>
  </ng-container>

  <!-- Duration Column -->
  <ng-container matColumnDef="duration">
    <mat-header-cell *matHeaderCellDef> Durée </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.duration }} </mat-cell>
  </ng-container>

  <!-- Student flag Column -->
  <!-- TO DO : Changer en emoji -->
  <ng-container matColumnDef="isStudent">
    <mat-header-cell *matHeaderCellDef> Etudiant </mat-header-cell>
    <mat-cell *matCellDef="let element">
      {{ element.isStudent ? "Oui" : "Non" }}
    </mat-cell>
  </ng-container>

  <!-- Amount Column -->
  <ng-container matColumnDef="amount">
    <mat-header-cell *matHeaderCellDef> Montant du </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.amount }} MGA </mat-cell>
  </ng-container>

  <!-- Action Column -->
  <ng-container matColumnDef="actions">
    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
    <mat-cell *matCellDef="let element">
      <button matIconButton (click)="onStop(element)">
        <mat-icon>stop_circle</mat-icon>
      </button>

      <button matIconButton (click)="onDelete(element)">
        <mat-icon>delete</mat-icon>
      </button>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns()"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns()"></mat-row>
</mat-table>
<mat-paginator [length]="totalCount()"
              [pageSize]="10"
              [pageSizeOptions]="[10, 20, 50]"
              aria-label="Select page"
              (page)="onPageChange($event)"
              >
              
</mat-paginator>

</div>

